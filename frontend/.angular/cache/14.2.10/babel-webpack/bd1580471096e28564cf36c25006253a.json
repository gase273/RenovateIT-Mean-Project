{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Pc/Desktop/RTI 3. god/6. semestar/PIA/Projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/user.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../navbar/navbar.component\";\nimport * as i6 from \"../footer/footer.component\";\n\nfunction ClientComponent_div_24_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 39);\n    i0.ɵɵtext(1, \"Ovo polje je obavezno.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ClientComponent_div_24_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 39);\n    i0.ɵɵtext(1, \"Nije validan format mejla.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ClientComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ClientComponent_div_24_small_1_Template, 2, 0, \"small\", 38);\n    i0.ɵɵtemplate(2, ClientComponent_div_24_small_2_Template, 2, 0, \"small\", 38);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r3 = i0.ɵɵreference(23);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors[\"pattern\"]);\n  }\n}\n\nfunction ClientComponent_div_29_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 39);\n    i0.ɵɵtext(1, \"Ovo polje je obavezno.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ClientComponent_div_29_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 39);\n    i0.ɵɵtext(1, \"Telefon se navodi u formatu 06 (ili +3816), zatim Vas broj bez razmaka ili crtica.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ClientComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ClientComponent_div_29_small_1_Template, 2, 0, \"small\", 38);\n    i0.ɵɵtemplate(2, ClientComponent_div_29_small_2_Template, 2, 0, \"small\", 38);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r5 = i0.ɵɵreference(28);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors[\"pattern\"]);\n  }\n}\n\nfunction ClientComponent_small_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 40);\n    i0.ɵɵtext(1, \"Uspe\\u0161na izmena podataka!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ClientComponent_small_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 7);\n    i0.ɵɵtext(1, \"Gre\\u0161ka pri izmeni podataka!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ClientComponent_div_45_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 39);\n    i0.ɵɵtext(1, \"Ovo polje je obavezno.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ClientComponent_div_45_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 39);\n    i0.ɵɵtext(1, \"Lozinka mora imati izmedju 7 i 12 karaktera, jedno veliko slovo, jednu cifru i jedan specijalan karakter i mora pocinjati slovom.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ClientComponent_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ClientComponent_div_45_small_1_Template, 2, 0, \"small\", 38);\n    i0.ɵɵtemplate(2, ClientComponent_div_45_small_2_Template, 2, 0, \"small\", 38);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r10 = i0.ɵɵreference(44);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r10.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r10.errors[\"pattern\"]);\n  }\n}\n\nfunction ClientComponent_small_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r13.passChangeText);\n  }\n}\n\nfunction ClientComponent_small_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r14.passChangeText);\n  }\n}\n\nfunction ClientComponent_small_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 41);\n    i0.ɵɵtext(1, \"Slika mora biti velicine 100x100px - 300x300px.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ClientComponent_small_65_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r16.imgChangeText);\n  }\n}\n\nfunction ClientComponent_small_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r17.imgChangeText);\n  }\n}\n\nexport class ClientComponent {\n  constructor(router, usrService) {\n    this.router = router;\n    this.usrService = usrService;\n    this.dataChange = false;\n    this.dataChangeFail = false;\n    this.passChange = false;\n    this.passChangeFail = false;\n    this.badChosen = false;\n    this.imgChange = false;\n    this.imgChangeFail = false;\n  }\n\n  ngOnInit() {\n    this.logged = JSON.parse(sessionStorage.getItem(\"loggedIn\"));\n\n    if (this.logged && this.logged.type == 0) {\n      this.firstname = this.logged.firstName;\n      this.lastname = this.logged.lastName;\n      this.email = this.logged.email;\n      this.phone = this.logged.phone;\n    } else this.router.navigate(['']);\n  }\n\n  changeData() {\n    this.usrService.editClientData(this.logged.username, this.firstname, this.lastname, this.phone, this.email).subscribe(response => {\n      if (response['status'] == \"ok\") {\n        //podaci izmenjeni u bazi, sada moraju da se izmene u sessionStorage\n        this.dataChange = true;\n        this.logged.firstName = this.firstname;\n        this.logged.lastName = this.lastname;\n        this.logged.phone = this.phone;\n        this.logged.email = this.email;\n        sessionStorage.setItem(\"loggedIn\", JSON.stringify(this.logged));\n      } else this.dataChangeFail = true;\n    });\n  }\n\n  changePass() {\n    this.usrService.editClientPassword(this.logged.username, this.password, this.newPassword).subscribe(response => {\n      if (response) {\n        //sifra je uspesno promenjena ako se poklopio jedan korisnik, a to se desi ako je user+pass kombinacija dobra\n        if (response['matchedCount'] == 1) {\n          this.passChange = true;\n          this.passChangeText = \"Uspešno izmenjena lozinka!\";\n          this.logged.password = this.password;\n          sessionStorage.setItem(\"loggedIn\", JSON.stringify(this.logged));\n        } else {\n          this.passChangeFail = true;\n          this.passChangeText = \"Pogrešno uneta stara lozinka!\";\n        }\n      } else {\n        this.passChangeFail = true;\n        this.passChangeText = \"Greška pri izmeni lozinke!\";\n      }\n    });\n  }\n\n  fileChosen(event) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      //isto kao kod registracije\n      if (event.target.value) {\n        _this.img = event.target.files[0];\n        let img = new Image();\n        img.src = URL.createObjectURL(_this.img);\n        yield img.decode();\n        if (img.naturalWidth < 100 || img.naturalWidth > 300 || img.naturalHeight < 100 || img.naturalHeight > 300) _this.badChosen = true;else _this.badChosen = false;\n      } else {\n        _this.badChosen = false;\n        _this.img = null;\n      }\n    })();\n  }\n\n  changeImg() {\n    //isto kao kod registracije\n    let form = new FormData();\n    form.append(\"profile_pic\", this.img);\n    form.append(\"user\", this.logged.username);\n    this.usrService.editImg(form).subscribe(response => {\n      if (response['status'] == 'ok') {\n        this.imgChange = true;\n        this.imgChangeText = \"Ikonica uspešno izmenjena!\";\n        this.logged.img = response[\"newImg\"];\n        sessionStorage.setItem(\"loggedIn\", JSON.stringify(this.logged));\n        this.ngOnInit();\n      } else {\n        this.imgChangeFail = true;\n        this.imgChangeText = \"Greška pri izmeni ikonice!\";\n      }\n    });\n  }\n\n}\n\nClientComponent.ɵfac = function ClientComponent_Factory(t) {\n  return new (t || ClientComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserService));\n};\n\nClientComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ClientComponent,\n  selectors: [[\"app-client\"]],\n  decls: 68,\n  vars: 41,\n  consts: [[1, \"container\", \"mb-5\", \"mt-5\"], [1, \"row\"], [1, \"col-md-6\"], [\"changeForm\", \"ngForm\"], [\"for\", \"firstname\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"firstname\", \"name\", \"firstname\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"Firstname\", \"ngModel\"], [1, \"text-danger\", \"d-block\"], [\"for\", \"lastname\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"lastname\", \"name\", \"lastname\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"Lastname\", \"ngModel\"], [\"for\", \"email\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"pattern\", \"[^@ \\\\t\\\\r\\\\n]+@[^@ \\\\t\\\\r\\\\n]+\\\\.[^@ \\\\t\\\\r\\\\n]+\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"Email\", \"ngModel\"], [4, \"ngIf\"], [\"for\", \"phone\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"phone\", \"name\", \"phone\", \"pattern\", \"^(\\\\+)(3816)([0-9]){6,9}|(06)([0-9]){6,9}$\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"Phone\", \"ngModel\"], [\"type\", \"submit\", \"value\", \"Izmeni podatke\", 1, \"btn\", \"btn-primary\", \"mt-2\", 3, \"disabled\", \"click\"], [\"class\", \"text-success d-block\", 4, \"ngIf\"], [\"class\", \"text-danger d-block\", 4, \"ngIf\"], [\"passForm\", \"ngForm\"], [\"for\", \"password\", 1, \"form-label\"], [\"type\", \"password\", \"name\", \"password\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"newPassword\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"newPassword\", \"name\", \"newPassword\", \"pattern\", \"^(?=[A-Za-z]*?[A-Za-z])(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{7,12}$\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"newPass\", \"ngModel\"], [\"for\", \"confirm\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"confirm\", \"name\", \"confirm\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"Confirm\", \"ngModel\"], [\"type\", \"submit\", \"value\", \"Izmeni lozinku\", 1, \"btn\", \"btn-primary\", \"mt-2\", 3, \"disabled\", \"click\"], [1, \"col-md-6\", \"d-flex\", \"flex-column\", \"align-items-center\"], [1, \"text-center\"], [\"alt\", \"Slika nije prona\\u0111ena\", 1, \"rounded\", 3, \"src\"], [\"for\", \"profile_pic\", 1, \"form-label\", \"mt-2\"], [\"type\", \"file\", \"id\", \"profile_pic\", \"name\", \"profile_pic\", \"accept\", \".png, .jpg, .jpeg\", 1, \"form-control\", \"w-50\", 3, \"input\"], [\"class\", \"text-danger w-50\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", \"mt-3\", 3, \"disabled\", \"click\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [1, \"text-danger\"], [1, \"text-success\", \"d-block\"], [1, \"text-danger\", \"w-50\"]],\n  template: function ClientComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-navbar\");\n      i0.ɵɵelementStart(1, \"div\", 0)(2, \"h4\");\n      i0.ɵɵtext(3, \"Izmena podataka\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 1)(5, \"div\", 2)(6, \"form\", null, 3)(8, \"label\", 4);\n      i0.ɵɵtext(9, \"Ime:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"input\", 5, 6);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.firstname = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"small\", 7);\n      i0.ɵɵtext(13, \"Ovo polje je obavezno.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"label\", 8);\n      i0.ɵɵtext(15, \"Prezime:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"input\", 9, 10);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_16_listener($event) {\n        return ctx.lastname = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"small\", 7);\n      i0.ɵɵtext(19, \"Ovo polje je obavezno.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"label\", 11);\n      i0.ɵɵtext(21, \"Email:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"input\", 12, 13);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_22_listener($event) {\n        return ctx.email = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(24, ClientComponent_div_24_Template, 3, 2, \"div\", 14);\n      i0.ɵɵelementStart(25, \"label\", 15);\n      i0.ɵɵtext(26, \"Broj Telefona:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"input\", 16, 17);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_27_listener($event) {\n        return ctx.phone = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(29, ClientComponent_div_29_Template, 3, 2, \"div\", 14);\n      i0.ɵɵelementStart(30, \"input\", 18);\n      i0.ɵɵlistener(\"click\", function ClientComponent_Template_input_click_30_listener() {\n        return ctx.changeData();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(31, ClientComponent_small_31_Template, 2, 0, \"small\", 19);\n      i0.ɵɵtemplate(32, ClientComponent_small_32_Template, 2, 0, \"small\", 20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(33, \"hr\");\n      i0.ɵɵelementStart(34, \"h4\");\n      i0.ɵɵtext(35, \"Izmena Lozinke\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"form\", null, 21)(38, \"label\", 22);\n      i0.ɵɵtext(39, \"Lozinka:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"input\", 23);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_40_listener($event) {\n        return ctx.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"label\", 24);\n      i0.ɵɵtext(42, \"Nova Lozinka:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"input\", 25, 26);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_43_listener($event) {\n        return ctx.newPassword = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(45, ClientComponent_div_45_Template, 3, 2, \"div\", 14);\n      i0.ɵɵelementStart(46, \"label\", 27);\n      i0.ɵɵtext(47, \"Ponovi Lozinku:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(48, \"input\", 28, 29);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_48_listener($event) {\n        return ctx.confirm = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(50, \"small\", 7);\n      i0.ɵɵtext(51, \"Lozinke se ne poklapaju.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(52, \"input\", 30);\n      i0.ɵɵlistener(\"click\", function ClientComponent_Template_input_click_52_listener() {\n        return ctx.changePass();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(53, ClientComponent_small_53_Template, 2, 1, \"small\", 19);\n      i0.ɵɵtemplate(54, ClientComponent_small_54_Template, 2, 1, \"small\", 20);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(55, \"div\", 31)(56, \"h4\", 32);\n      i0.ɵɵtext(57, \"Trenutna Profilna Ikonica\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(58, \"img\", 33);\n      i0.ɵɵelementStart(59, \"label\", 34);\n      i0.ɵɵtext(60, \"Nova Profilna Ikonica:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(61, \"input\", 35);\n      i0.ɵɵlistener(\"input\", function ClientComponent_Template_input_input_61_listener($event) {\n        return ctx.fileChosen($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(62, ClientComponent_small_62_Template, 2, 0, \"small\", 36);\n      i0.ɵɵelementStart(63, \"button\", 37);\n      i0.ɵɵlistener(\"click\", function ClientComponent_Template_button_click_63_listener() {\n        return ctx.changeImg();\n      });\n      i0.ɵɵtext(64, \"Izmenite Profilnu Ikonicu\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(65, ClientComponent_small_65_Template, 2, 1, \"small\", 19);\n      i0.ɵɵtemplate(66, ClientComponent_small_66_Template, 2, 1, \"small\", 20);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(67, \"app-footer\");\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(7);\n\n      const _r1 = i0.ɵɵreference(11);\n\n      const _r2 = i0.ɵɵreference(17);\n\n      const _r3 = i0.ɵɵreference(23);\n\n      const _r5 = i0.ɵɵreference(28);\n\n      const _r9 = i0.ɵɵreference(37);\n\n      const _r10 = i0.ɵɵreference(44);\n\n      const _r12 = i0.ɵɵreference(49);\n\n      i0.ɵɵadvance(10);\n      i0.ɵɵclassProp(\"is-invalid\", _r1.invalid && _r1.touched);\n      i0.ɵɵproperty(\"ngModel\", ctx.firstname);\n      i0.ɵɵadvance(2);\n      i0.ɵɵclassProp(\"d-none\", _r1.valid || _r1.untouched);\n      i0.ɵɵadvance(4);\n      i0.ɵɵclassProp(\"is-invalid\", _r2.invalid && _r2.touched);\n      i0.ɵɵproperty(\"ngModel\", ctx.lastname);\n      i0.ɵɵadvance(2);\n      i0.ɵɵclassProp(\"d-none\", _r2.valid || _r2.untouched);\n      i0.ɵɵadvance(4);\n      i0.ɵɵclassProp(\"is-invalid\", _r3.invalid && _r3.touched);\n      i0.ɵɵproperty(\"ngModel\", ctx.email);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", _r3.errors && _r3.invalid && _r3.touched);\n      i0.ɵɵadvance(3);\n      i0.ɵɵclassProp(\"is-invalid\", _r5.invalid && _r5.touched);\n      i0.ɵɵproperty(\"ngModel\", ctx.phone);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", _r5.errors && _r5.invalid && _r5.touched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", _r0.form.invalid || _r0.form.pristine || _r0.submitted);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.dataChange);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.dataChangeFail);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.password);\n      i0.ɵɵadvance(3);\n      i0.ɵɵclassProp(\"is-invalid\", _r10.invalid && _r10.touched);\n      i0.ɵɵproperty(\"ngModel\", ctx.newPassword);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", _r10.errors && _r10.invalid && _r10.touched);\n      i0.ɵɵadvance(3);\n      i0.ɵɵclassProp(\"is-invalid\", _r12.value != _r10.value && _r12.touched);\n      i0.ɵɵproperty(\"ngModel\", ctx.confirm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵclassProp(\"d-none\", _r12.value == _r10.value || _r12.untouched);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", _r9.form.invalid || _r12.value != _r10.value || _r9.submitted);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.passChange);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.passChangeFail);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"src\", \"http://localhost:4000/images/\" + ctx.logged.img, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵclassProp(\"is-invalid\", ctx.badChosen);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.badChosen);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.badChosen || !ctx.img);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.imgChange);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.imgChangeFail);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.PatternValidator, i4.NgModel, i4.NgForm, i5.NavbarComponent, i6.FooterComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjbGllbnQuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ClientComponent","constructor","router","usrService","ngOnInit","logged","JSON","parse","sessionStorage","getItem","type","firstname","firstName","lastname","lastName","email","phone","navigate","changeData","editClientData","username","subscribe","response","dataChange","setItem","stringify","dataChangeFail","changePass","editClientPassword","password","newPassword","passChange","passChangeText","passChangeFail","fileChosen","event","target","value","img","files","Image","src","URL","createObjectURL","decode","naturalWidth","naturalHeight","badChosen","changeImg","form","FormData","append","editImg","imgChange","imgChangeText","imgChangeFail","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Pc\\Desktop\\RTI 3. god\\6. semestar\\PIA\\Projekat\\frontend\\src\\app\\client\\client.component.html","C:\\Users\\Pc\\Desktop\\RTI 3. god\\6. semestar\\PIA\\Projekat\\frontend\\src\\app\\client\\client.component.ts"],"sourcesContent":["<app-navbar></app-navbar>\n\n<div class=\"container mb-5 mt-5\">\n  <h4>Izmena podataka</h4>\n\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <form #changeForm=\"ngForm\">\n        <label for=\"firstname\" class=\"form-label\">Ime:</label>\n          <input type=\"text\" id=\"firstname\" name=\"firstname\" #Firstname=\"ngModel\"\n            [class.is-invalid]=\"Firstname.invalid && Firstname.touched\" [(ngModel)]=\"firstname\" class=\"form-control\" required>\n          <small class=\"text-danger d-block\" [class.d-none]=\"Firstname.valid || Firstname.untouched\">Ovo polje je obavezno.</small>\n          <label for=\"lastname\" class=\"form-label\">Prezime:</label>\n          <input type=\"text\" id=\"lastname\" name=\"lastname\" #Lastname=\"ngModel\"\n            [class.is-invalid]=\"Lastname.invalid && Lastname.touched\" [(ngModel)]=\"lastname\" class=\"form-control\" required>\n          <small class=\"text-danger d-block\" [class.d-none]=\"Lastname.valid || Lastname.untouched\">Ovo polje je obavezno.</small>\n          <label for=\"email\" class=\"form-label\">Email:</label>\n          <input type=\"email\" id=\"email\" name=\"email\" #Email=\"ngModel\"\n            [class.is-invalid]=\"Email.invalid && Email.touched\" [(ngModel)]=\"email\" class=\"form-control\"\n            pattern=\"[^@ \\t\\r\\n]+@[^@ \\t\\r\\n]+\\.[^@ \\t\\r\\n]+\" required>\n          <div *ngIf=\"Email.errors && (Email.invalid && Email.touched) \">\n            <small class=\"text-danger\" *ngIf=\"Email.errors['required']\">Ovo polje je obavezno.</small>\n            <small class=\"text-danger\" *ngIf=\"Email.errors['pattern']\">Nije validan format mejla.</small>\n          </div>\n          <label for=\"phone\" class=\"form-label\">Broj Telefona:</label>\n          <input type=\"text\" id=\"phone\" name=\"phone\" #Phone=\"ngModel\"\n            [class.is-invalid]=\"Phone.invalid && Phone.touched\" [(ngModel)]=\"phone\" class=\"form-control\"\n            pattern=\"^(\\+)(3816)([0-9]){6,9}|(06)([0-9]){6,9}$\" required>\n          <div *ngIf=\"Phone.errors && (Phone.invalid && Phone.touched) \">\n            <small class=\"text-danger\" *ngIf=\"Phone.errors['required']\">Ovo polje je obavezno.</small>\n            <small class=\"text-danger\" *ngIf=\"Phone.errors['pattern']\">Telefon se navodi u formatu 06 (ili +3816), zatim Vas broj bez razmaka ili crtica.</small>\n          </div>\n          <input type=\"submit\" value=\"Izmeni podatke\" [disabled]=\"changeForm.form.invalid || changeForm.form.pristine || changeForm.submitted\" (click)=\"changeData()\" class=\"btn btn-primary mt-2\">\n          <small class=\"text-success d-block\" *ngIf=\"dataChange\">Uspešna izmena podataka!</small>\n          <small class=\"text-danger d-block\" *ngIf=\"dataChangeFail\">Greška pri izmeni podataka!</small>\n      </form>\n\n      <hr>\n      <h4>Izmena Lozinke</h4>\n      <form #passForm = \"ngForm\">\n        <label for=\"password\" class=\"form-label\">Lozinka:</label>\n        <input type=\"password\" name=\"password\" [(ngModel)]=\"password\" class=\"form-control\">\n        <label for=\"newPassword\" class=\"form-label\">Nova Lozinka:</label>\n        <input type=\"password\" id=\"newPassword\" name=\"newPassword\" #newPass=\"ngModel\"\n          [class.is-invalid]=\"newPass.invalid && newPass.touched\" [(ngModel)]=\"newPassword\" class=\"form-control\"\n          pattern=\"^(?=[A-Za-z]*?[A-Za-z])(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{7,12}$\" required>\n          <div *ngIf=\"newPass.errors && (newPass.invalid && newPass.touched)\">\n            <small class=\"text-danger\" *ngIf=\"newPass.errors['required']\">Ovo polje je obavezno.</small>\n            <small class=\"text-danger\" *ngIf=\"newPass.errors['pattern']\">Lozinka mora imati izmedju 7 i 12 karaktera,\n              jedno veliko slovo, jednu cifru i jedan specijalan karakter i mora pocinjati slovom.</small>\n          </div>\n        <label for=\"confirm\" class=\"form-label\">Ponovi Lozinku:</label>\n        <input type=\"password\" id=\"confirm\" name=\"confirm\" #Confirm=\"ngModel\"\n          [class.is-invalid]=\"(Confirm.value != newPass.value) && Confirm.touched\" [(ngModel)]=\"confirm\" class=\"form-control\">\n        <small class=\"text-danger d-block\" [class.d-none]=\"(Confirm.value == newPass.value) || Confirm.untouched\">Lozinke se ne poklapaju.</small>\n\n        <input [disabled]=\"passForm.form.invalid || Confirm.value != newPass.value || passForm.submitted\" type=\"submit\" value=\"Izmeni lozinku\" (click)=\"changePass()\" class=\"btn btn-primary mt-2\">\n        <small class=\"text-success d-block\" *ngIf=\"passChange\">{{passChangeText}}</small>\n        <small class=\"text-danger d-block\" *ngIf=\"passChangeFail\">{{passChangeText}}</small>\n      </form>\n    </div>\n    <div class=\"col-md-6 d-flex flex-column align-items-center\">\n        <h4 class=\"text-center\">Trenutna Profilna Ikonica</h4>\n        <img [src]=\"'http://localhost:4000/images/' + logged.img\" class=\"rounded\" alt=\"Slika nije pronađena\">\n        <label for=\"profile_pic\" class=\"form-label mt-2\">Nova Profilna Ikonica:</label>\n        <input type=\"file\" id=\"profile_pic\" [class.is-invalid]=\"badChosen\" name=\"profile_pic\" accept=\".png, .jpg, .jpeg\" (input)=\"fileChosen($event)\" class=\"form-control w-50\">\n        <small class=\"text-danger w-50\" *ngIf=\"badChosen\">Slika mora biti velicine 100x100px - 300x300px.</small>\n        <button [disabled]=\"badChosen || !img\" class=\"btn btn-primary mt-3\" (click)=\"changeImg()\">Izmenite Profilnu Ikonicu</button>\n        <small class=\"text-success d-block\" *ngIf=\"imgChange\">{{imgChangeText}}</small>\n        <small class=\"text-danger d-block\" *ngIf=\"imgChangeFail\">{{imgChangeText}}</small>\n    </div>\n  </div>\n\n</div>\n\n<app-footer></app-footer>\n","import { Component, OnInit } from '@angular/core';\nimport { User } from '../models/user';\nimport { Router } from '@angular/router';\nimport { UserService } from '../services/user.service';\n\n@Component({\n  selector: 'app-client',\n  templateUrl: './client.component.html',\n  styleUrls: ['./client.component.css']\n})\nexport class ClientComponent implements OnInit {\n\n  logged: User\n  firstname: string\n  lastname: string\n  email: string\n  phone: string\n  dataChange: boolean = false;\n  dataChangeFail: boolean = false;\n  password: string\n  newPassword: string\n  confirm: string\n  passChange: boolean = false;\n  passChangeFail: boolean = false;\n  passChangeText: string\n  badChosen: boolean = false;\n  img: File\n  imgChange: boolean = false;\n  imgChangeFail: boolean = false;\n  imgChangeText: string\n\n  constructor(private router: Router, private usrService: UserService) { }\n\n  ngOnInit(): void {\n    this.logged = JSON.parse(sessionStorage.getItem(\"loggedIn\"))\n    if(this.logged && this.logged.type == 0) {\n      this.firstname = this.logged.firstName\n      this.lastname = this.logged.lastName\n      this.email = this.logged.email\n      this.phone = this.logged.phone\n    }\n    else this.router.navigate([''])\n  }\n\n  changeData() {\n    this.usrService.editClientData(this.logged.username, this.firstname, this.lastname, this.phone, this.email).subscribe((response) => {\n      if(response['status'] == \"ok\") {\n\n        //podaci izmenjeni u bazi, sada moraju da se izmene u sessionStorage\n        this.dataChange = true\n        this.logged.firstName = this.firstname\n        this.logged.lastName = this.lastname\n        this.logged.phone = this.phone\n        this.logged.email = this.email\n        sessionStorage.setItem(\"loggedIn\", JSON.stringify(this.logged))\n      }\n      else this.dataChangeFail = true\n    })\n  }\n  changePass() {\n    this.usrService.editClientPassword(this.logged.username, this.password, this.newPassword).subscribe((response) => {\n      if(response) {\n        //sifra je uspesno promenjena ako se poklopio jedan korisnik, a to se desi ako je user+pass kombinacija dobra\n        if(response['matchedCount'] == 1) {\n          this.passChange = true\n          this.passChangeText = \"Uspešno izmenjena lozinka!\"\n          this.logged.password = this.password\n          sessionStorage.setItem(\"loggedIn\", JSON.stringify(this.logged))\n        }\n        else {\n          this.passChangeFail = true\n          this.passChangeText = \"Pogrešno uneta stara lozinka!\"\n        }\n      }\n      else {\n        this.passChangeFail = true\n        this.passChangeText = \"Greška pri izmeni lozinke!\"\n      }\n\n    })\n  }\n\n  async fileChosen(event:any) {\n    //isto kao kod registracije\n    if(event.target.value) {\n      this.img = <File>event.target.files[0]\n      let img = new Image();\n      img.src = URL.createObjectURL(this.img);\n      await img.decode();\n      if(img.naturalWidth < 100 || img.naturalWidth > 300 || img.naturalHeight < 100 || img.naturalHeight > 300) this.badChosen = true;\n      else this.badChosen = false;\n    }\n    else {\n      this.badChosen = false;\n      this.img = null;\n    }\n  }\n\n  changeImg() {\n    //isto kao kod registracije\n    let form = new FormData()\n    form.append(\"profile_pic\", this.img)\n    form.append(\"user\", this.logged.username)\n    this.usrService.editImg(form).subscribe((response) => {\n      if(response['status'] == 'ok') {\n        this.imgChange = true;\n        this.imgChangeText = \"Ikonica uspešno izmenjena!\"\n        this.logged.img = response[\"newImg\"]\n        sessionStorage.setItem(\"loggedIn\", JSON.stringify(this.logged))\n        this.ngOnInit()\n      }\n      else {\n        this.imgChangeFail = true;\n        this.imgChangeText = \"Greška pri izmeni ikonice!\"\n      }\n    })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}