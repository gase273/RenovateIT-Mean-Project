{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst validate_1 = require(\"../../compile/validate\");\n\nconst code_1 = require(\"../code\");\n\nconst util_1 = require(\"../../compile/util\");\n\nconst additionalProperties_1 = require(\"./additionalProperties\");\n\nconst def = {\n  keyword: \"properties\",\n  type: \"object\",\n  schemaType: \"object\",\n\n  code(cxt) {\n    const {\n      gen,\n      schema,\n      parentSchema,\n      data,\n      it\n    } = cxt;\n\n    if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n      additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n    }\n\n    const allProps = (0, code_1.allSchemaProperties)(schema);\n\n    for (const prop of allProps) {\n      it.definedProperties.add(prop);\n    }\n\n    if (it.opts.unevaluated && allProps.length && it.props !== true) {\n      it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n    }\n\n    const properties = allProps.filter(p => !(0, util_1.alwaysValidSchema)(it, schema[p]));\n    if (properties.length === 0) return;\n    const valid = gen.name(\"valid\");\n\n    for (const prop of properties) {\n      if (hasDefault(prop)) {\n        applyPropertySchema(prop);\n      } else {\n        gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties));\n        applyPropertySchema(prop);\n        if (!it.allErrors) gen.else().var(valid, true);\n        gen.endIf();\n      }\n\n      cxt.it.definedProperties.add(prop);\n      cxt.ok(valid);\n    }\n\n    function hasDefault(prop) {\n      return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n    }\n\n    function applyPropertySchema(prop) {\n      cxt.subschema({\n        keyword: \"properties\",\n        schemaProp: prop,\n        dataProp: prop\n      }, valid);\n    }\n  }\n\n};\nexports.default = def;","map":{"version":3,"names":["Object","defineProperty","exports","value","validate_1","require","code_1","util_1","additionalProperties_1","def","keyword","type","schemaType","code","cxt","gen","schema","parentSchema","data","it","opts","removeAdditional","additionalProperties","undefined","default","KeywordCxt","allProps","allSchemaProperties","prop","definedProperties","add","unevaluated","length","props","mergeEvaluated","toHash","properties","filter","p","alwaysValidSchema","valid","name","hasDefault","applyPropertySchema","if","propertyInData","ownProperties","allErrors","else","var","endIf","ok","useDefaults","compositeRule","subschema","schemaProp","dataProp"],"sources":["C:/Users/Pc/Desktop/RTI 3. god/6. semestar/PIA/Projekat/frontend/node_modules/ajv/dist/vocabularies/applicator/properties.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_1 = require(\"../../compile/validate\");\nconst code_1 = require(\"../code\");\nconst util_1 = require(\"../../compile/util\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst def = {\n    keyword: \"properties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n            additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n        }\n        const allProps = (0, code_1.allSchemaProperties)(schema);\n        for (const prop of allProps) {\n            it.definedProperties.add(prop);\n        }\n        if (it.opts.unevaluated && allProps.length && it.props !== true) {\n            it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n        }\n        const properties = allProps.filter((p) => !(0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (properties.length === 0)\n            return;\n        const valid = gen.name(\"valid\");\n        for (const prop of properties) {\n            if (hasDefault(prop)) {\n                applyPropertySchema(prop);\n            }\n            else {\n                gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties));\n                applyPropertySchema(prop);\n                if (!it.allErrors)\n                    gen.else().var(valid, true);\n                gen.endIf();\n            }\n            cxt.it.definedProperties.add(prop);\n            cxt.ok(valid);\n        }\n        function hasDefault(prop) {\n            return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n        }\n        function applyPropertySchema(prop) {\n            cxt.subschema({\n                keyword: \"properties\",\n                schemaProp: prop,\n                dataProp: prop,\n            }, valid);\n        }\n    },\n};\nexports.default = def;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}