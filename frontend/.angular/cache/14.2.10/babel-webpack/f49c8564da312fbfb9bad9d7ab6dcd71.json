{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateAdditionalItems = void 0;\n\nconst codegen_1 = require(\"../../compile/codegen\");\n\nconst util_1 = require(\"../../compile/util\");\n\nconst error = {\n  message: ({\n    params: {\n      len\n    }\n  }) => (0, codegen_1.str)`must NOT have more than ${len} items`,\n  params: ({\n    params: {\n      len\n    }\n  }) => (0, codegen_1._)`{limit: ${len}}`\n};\nconst def = {\n  keyword: \"additionalItems\",\n  type: \"array\",\n  schemaType: [\"boolean\", \"object\"],\n  before: \"uniqueItems\",\n  error,\n\n  code(cxt) {\n    const {\n      parentSchema,\n      it\n    } = cxt;\n    const {\n      items\n    } = parentSchema;\n\n    if (!Array.isArray(items)) {\n      (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n      return;\n    }\n\n    validateAdditionalItems(cxt, items);\n  }\n\n};\n\nfunction validateAdditionalItems(cxt, items) {\n  const {\n    gen,\n    schema,\n    data,\n    keyword,\n    it\n  } = cxt;\n  it.items = true;\n  const len = gen.const(\"len\", (0, codegen_1._)`${data}.length`);\n\n  if (schema === false) {\n    cxt.setParams({\n      len: items.length\n    });\n    cxt.pass((0, codegen_1._)`${len} <= ${items.length}`);\n  } else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n    const valid = gen.var(\"valid\", (0, codegen_1._)`${len} <= ${items.length}`); // TODO var\n\n    gen.if((0, codegen_1.not)(valid), () => validateItems(valid));\n    cxt.ok(valid);\n  }\n\n  function validateItems(valid) {\n    gen.forRange(\"i\", items.length, len, i => {\n      cxt.subschema({\n        keyword,\n        dataProp: i,\n        dataPropType: util_1.Type.Num\n      }, valid);\n      if (!it.allErrors) gen.if((0, codegen_1.not)(valid), () => gen.break());\n    });\n  }\n}\n\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;","map":{"version":3,"names":["Object","defineProperty","exports","value","validateAdditionalItems","codegen_1","require","util_1","error","message","params","len","str","_","def","keyword","type","schemaType","before","code","cxt","parentSchema","it","items","Array","isArray","checkStrictMode","gen","schema","data","const","setParams","length","pass","alwaysValidSchema","valid","var","if","not","validateItems","ok","forRange","i","subschema","dataProp","dataPropType","Type","Num","allErrors","break","default"],"sources":["C:/Users/Pc/Desktop/RTI 3. god/6. semestar/PIA/Projekat/frontend/node_modules/ajv/dist/vocabularies/applicator/additionalItems.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAdditionalItems = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"additionalItems\",\n    type: \"array\",\n    schemaType: [\"boolean\", \"object\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { parentSchema, it } = cxt;\n        const { items } = parentSchema;\n        if (!Array.isArray(items)) {\n            (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n            return;\n        }\n        validateAdditionalItems(cxt, items);\n    },\n};\nfunction validateAdditionalItems(cxt, items) {\n    const { gen, schema, data, keyword, it } = cxt;\n    it.items = true;\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    if (schema === false) {\n        cxt.setParams({ len: items.length });\n        cxt.pass((0, codegen_1._) `${len} <= ${items.length}`);\n    }\n    else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.var(\"valid\", (0, codegen_1._) `${len} <= ${items.length}`); // TODO var\n        gen.if((0, codegen_1.not)(valid), () => validateItems(valid));\n        cxt.ok(valid);\n    }\n    function validateItems(valid) {\n        gen.forRange(\"i\", items.length, len, (i) => {\n            cxt.subschema({ keyword, dataProp: i, dataPropType: util_1.Type.Num }, valid);\n            if (!it.allErrors)\n                gen.if((0, codegen_1.not)(valid), () => gen.break());\n        });\n    }\n}\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}