{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst code_1 = require(\"../code\");\n\nconst codegen_1 = require(\"../../compile/codegen\");\n\nconst names_1 = require(\"../../compile/names\");\n\nconst util_1 = require(\"../../compile/util\");\n\nconst error = {\n  message: \"must NOT have additional properties\",\n  params: ({\n    params\n  }) => (0, codegen_1._)`{additionalProperty: ${params.additionalProperty}}`\n};\nconst def = {\n  keyword: \"additionalProperties\",\n  type: [\"object\"],\n  schemaType: [\"boolean\", \"object\"],\n  allowUndefined: true,\n  trackErrors: true,\n  error,\n\n  code(cxt) {\n    const {\n      gen,\n      schema,\n      parentSchema,\n      data,\n      errsCount,\n      it\n    } = cxt;\n    /* istanbul ignore if */\n\n    if (!errsCount) throw new Error(\"ajv implementation error\");\n    const {\n      allErrors,\n      opts\n    } = it;\n    it.props = true;\n    if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema)) return;\n    const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n    const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n    checkAdditionalProperties();\n    cxt.ok((0, codegen_1._)`${errsCount} === ${names_1.default.errors}`);\n\n    function checkAdditionalProperties() {\n      gen.forIn(\"key\", data, key => {\n        if (!props.length && !patProps.length) additionalPropertyCode(key);else gen.if(isAdditional(key), () => additionalPropertyCode(key));\n      });\n    }\n\n    function isAdditional(key) {\n      let definedProp;\n\n      if (props.length > 8) {\n        // TODO maybe an option instead of hard-coded 8?\n        const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n        definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n      } else if (props.length) {\n        definedProp = (0, codegen_1.or)(...props.map(p => (0, codegen_1._)`${key} === ${p}`));\n      } else {\n        definedProp = codegen_1.nil;\n      }\n\n      if (patProps.length) {\n        definedProp = (0, codegen_1.or)(definedProp, ...patProps.map(p => (0, codegen_1._)`${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n      }\n\n      return (0, codegen_1.not)(definedProp);\n    }\n\n    function deleteAdditional(key) {\n      gen.code((0, codegen_1._)`delete ${data}[${key}]`);\n    }\n\n    function additionalPropertyCode(key) {\n      if (opts.removeAdditional === \"all\" || opts.removeAdditional && schema === false) {\n        deleteAdditional(key);\n        return;\n      }\n\n      if (schema === false) {\n        cxt.setParams({\n          additionalProperty: key\n        });\n        cxt.error();\n        if (!allErrors) gen.break();\n        return;\n      }\n\n      if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.name(\"valid\");\n\n        if (opts.removeAdditional === \"failing\") {\n          applyAdditionalSchema(key, valid, false);\n          gen.if((0, codegen_1.not)(valid), () => {\n            cxt.reset();\n            deleteAdditional(key);\n          });\n        } else {\n          applyAdditionalSchema(key, valid);\n          if (!allErrors) gen.if((0, codegen_1.not)(valid), () => gen.break());\n        }\n      }\n    }\n\n    function applyAdditionalSchema(key, valid, errors) {\n      const subschema = {\n        keyword: \"additionalProperties\",\n        dataProp: key,\n        dataPropType: util_1.Type.Str\n      };\n\n      if (errors === false) {\n        Object.assign(subschema, {\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false\n        });\n      }\n\n      cxt.subschema(subschema, valid);\n    }\n  }\n\n};\nexports.default = def;","map":{"version":3,"names":["Object","defineProperty","exports","value","code_1","require","codegen_1","names_1","util_1","error","message","params","_","additionalProperty","def","keyword","type","schemaType","allowUndefined","trackErrors","code","cxt","gen","schema","parentSchema","data","errsCount","it","Error","allErrors","opts","props","removeAdditional","alwaysValidSchema","allSchemaProperties","properties","patProps","patternProperties","checkAdditionalProperties","ok","default","errors","forIn","key","length","additionalPropertyCode","if","isAdditional","definedProp","propsSchema","schemaRefOrVal","isOwnProperty","or","map","p","nil","usePattern","not","deleteAdditional","setParams","break","valid","name","applyAdditionalSchema","reset","subschema","dataProp","dataPropType","Type","Str","assign","compositeRule","createErrors"],"sources":["C:/Users/Pc/Desktop/RTI 3. god/6. semestar/PIA/Projekat/frontend/node_modules/ajv/dist/vocabularies/applicator/additionalProperties.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must NOT have additional properties\",\n    params: ({ params }) => (0, codegen_1._) `{additionalProperty: ${params.additionalProperty}}`,\n};\nconst def = {\n    keyword: \"additionalProperties\",\n    type: [\"object\"],\n    schemaType: [\"boolean\", \"object\"],\n    allowUndefined: true,\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, opts } = it;\n        it.props = true;\n        if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n        const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n        checkAdditionalProperties();\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function checkAdditionalProperties() {\n            gen.forIn(\"key\", data, (key) => {\n                if (!props.length && !patProps.length)\n                    additionalPropertyCode(key);\n                else\n                    gen.if(isAdditional(key), () => additionalPropertyCode(key));\n            });\n        }\n        function isAdditional(key) {\n            let definedProp;\n            if (props.length > 8) {\n                // TODO maybe an option instead of hard-coded 8?\n                const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n                definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n            }\n            else if (props.length) {\n                definedProp = (0, codegen_1.or)(...props.map((p) => (0, codegen_1._) `${key} === ${p}`));\n            }\n            else {\n                definedProp = codegen_1.nil;\n            }\n            if (patProps.length) {\n                definedProp = (0, codegen_1.or)(definedProp, ...patProps.map((p) => (0, codegen_1._) `${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n            }\n            return (0, codegen_1.not)(definedProp);\n        }\n        function deleteAdditional(key) {\n            gen.code((0, codegen_1._) `delete ${data}[${key}]`);\n        }\n        function additionalPropertyCode(key) {\n            if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n                deleteAdditional(key);\n                return;\n            }\n            if (schema === false) {\n                cxt.setParams({ additionalProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                if (opts.removeAdditional === \"failing\") {\n                    applyAdditionalSchema(key, valid, false);\n                    gen.if((0, codegen_1.not)(valid), () => {\n                        cxt.reset();\n                        deleteAdditional(key);\n                    });\n                }\n                else {\n                    applyAdditionalSchema(key, valid);\n                    if (!allErrors)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                }\n            }\n        }\n        function applyAdditionalSchema(key, valid, errors) {\n            const subschema = {\n                keyword: \"additionalProperties\",\n                dataProp: key,\n                dataPropType: util_1.Type.Str,\n            };\n            if (errors === false) {\n                Object.assign(subschema, {\n                    compositeRule: true,\n                    createErrors: false,\n                    allErrors: false,\n                });\n            }\n            cxt.subschema(subschema, valid);\n        }\n    },\n};\nexports.default = def;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}