{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst code_1 = require(\"../code\");\n\nconst codegen_1 = require(\"../../compile/codegen\");\n\nconst util_1 = require(\"../../compile/util\");\n\nconst error = {\n  message: ({\n    params: {\n      missingProperty\n    }\n  }) => (0, codegen_1.str)`must have required property '${missingProperty}'`,\n  params: ({\n    params: {\n      missingProperty\n    }\n  }) => (0, codegen_1._)`{missingProperty: ${missingProperty}}`\n};\nconst def = {\n  keyword: \"required\",\n  type: \"object\",\n  schemaType: \"array\",\n  $data: true,\n  error,\n\n  code(cxt) {\n    const {\n      gen,\n      schema,\n      schemaCode,\n      data,\n      $data,\n      it\n    } = cxt;\n    const {\n      opts\n    } = it;\n    if (!$data && schema.length === 0) return;\n    const useLoop = schema.length >= opts.loopRequired;\n    if (it.allErrors) allErrorsMode();else exitOnErrorMode();\n\n    if (opts.strictRequired) {\n      const props = cxt.parentSchema.properties;\n      const {\n        definedProperties\n      } = cxt.it;\n\n      for (const requiredKey of schema) {\n        if ((props === null || props === void 0 ? void 0 : props[requiredKey]) === undefined && !definedProperties.has(requiredKey)) {\n          const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n          const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`;\n          (0, util_1.checkStrictMode)(it, msg, it.opts.strictRequired);\n        }\n      }\n    }\n\n    function allErrorsMode() {\n      if (useLoop || $data) {\n        cxt.block$data(codegen_1.nil, loopAllRequired);\n      } else {\n        for (const prop of schema) {\n          (0, code_1.checkReportMissingProp)(cxt, prop);\n        }\n      }\n    }\n\n    function exitOnErrorMode() {\n      const missing = gen.let(\"missing\");\n\n      if (useLoop || $data) {\n        const valid = gen.let(\"valid\", true);\n        cxt.block$data(valid, () => loopUntilMissing(missing, valid));\n        cxt.ok(valid);\n      } else {\n        gen.if((0, code_1.checkMissingProp)(cxt, schema, missing));\n        (0, code_1.reportMissingProp)(cxt, missing);\n        gen.else();\n      }\n    }\n\n    function loopAllRequired() {\n      gen.forOf(\"prop\", schemaCode, prop => {\n        cxt.setParams({\n          missingProperty: prop\n        });\n        gen.if((0, code_1.noPropertyInData)(gen, data, prop, opts.ownProperties), () => cxt.error());\n      });\n    }\n\n    function loopUntilMissing(missing, valid) {\n      cxt.setParams({\n        missingProperty: missing\n      });\n      gen.forOf(missing, schemaCode, () => {\n        gen.assign(valid, (0, code_1.propertyInData)(gen, data, missing, opts.ownProperties));\n        gen.if((0, codegen_1.not)(valid), () => {\n          cxt.error();\n          gen.break();\n        });\n      }, codegen_1.nil);\n    }\n  }\n\n};\nexports.default = def;","map":{"version":3,"names":["Object","defineProperty","exports","value","code_1","require","codegen_1","util_1","error","message","params","missingProperty","str","_","def","keyword","type","schemaType","$data","code","cxt","gen","schema","schemaCode","data","it","opts","length","useLoop","loopRequired","allErrors","allErrorsMode","exitOnErrorMode","strictRequired","props","parentSchema","properties","definedProperties","requiredKey","undefined","has","schemaPath","schemaEnv","baseId","errSchemaPath","msg","checkStrictMode","block$data","nil","loopAllRequired","prop","checkReportMissingProp","missing","let","valid","loopUntilMissing","ok","if","checkMissingProp","reportMissingProp","else","forOf","setParams","noPropertyInData","ownProperties","assign","propertyInData","not","break","default"],"sources":["C:/Users/Pc/Desktop/RTI 3. god/6. semestar/PIA/Projekat/frontend/node_modules/ajv/dist/vocabularies/validation/required.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { missingProperty } }) => (0, codegen_1.str) `must have required property '${missingProperty}'`,\n    params: ({ params: { missingProperty } }) => (0, codegen_1._) `{missingProperty: ${missingProperty}}`,\n};\nconst def = {\n    keyword: \"required\",\n    type: \"object\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, schema, schemaCode, data, $data, it } = cxt;\n        const { opts } = it;\n        if (!$data && schema.length === 0)\n            return;\n        const useLoop = schema.length >= opts.loopRequired;\n        if (it.allErrors)\n            allErrorsMode();\n        else\n            exitOnErrorMode();\n        if (opts.strictRequired) {\n            const props = cxt.parentSchema.properties;\n            const { definedProperties } = cxt.it;\n            for (const requiredKey of schema) {\n                if ((props === null || props === void 0 ? void 0 : props[requiredKey]) === undefined && !definedProperties.has(requiredKey)) {\n                    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n                    const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`;\n                    (0, util_1.checkStrictMode)(it, msg, it.opts.strictRequired);\n                }\n            }\n        }\n        function allErrorsMode() {\n            if (useLoop || $data) {\n                cxt.block$data(codegen_1.nil, loopAllRequired);\n            }\n            else {\n                for (const prop of schema) {\n                    (0, code_1.checkReportMissingProp)(cxt, prop);\n                }\n            }\n        }\n        function exitOnErrorMode() {\n            const missing = gen.let(\"missing\");\n            if (useLoop || $data) {\n                const valid = gen.let(\"valid\", true);\n                cxt.block$data(valid, () => loopUntilMissing(missing, valid));\n                cxt.ok(valid);\n            }\n            else {\n                gen.if((0, code_1.checkMissingProp)(cxt, schema, missing));\n                (0, code_1.reportMissingProp)(cxt, missing);\n                gen.else();\n            }\n        }\n        function loopAllRequired() {\n            gen.forOf(\"prop\", schemaCode, (prop) => {\n                cxt.setParams({ missingProperty: prop });\n                gen.if((0, code_1.noPropertyInData)(gen, data, prop, opts.ownProperties), () => cxt.error());\n            });\n        }\n        function loopUntilMissing(missing, valid) {\n            cxt.setParams({ missingProperty: missing });\n            gen.forOf(missing, schemaCode, () => {\n                gen.assign(valid, (0, code_1.propertyInData)(gen, data, missing, opts.ownProperties));\n                gen.if((0, codegen_1.not)(valid), () => {\n                    cxt.error();\n                    gen.break();\n                });\n            }, codegen_1.nil);\n        }\n    },\n};\nexports.default = def;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}